# ComfyUI åˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡éƒ¨ç½²å®Œæ•´æŒ‡å—

## ğŸ‰ æ¦‚è¿°

æœ¬æŒ‡å—æä¾›ComfyUIåˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡ç³»ç»Ÿçš„å®Œæ•´éƒ¨ç½²æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¸»æœºè°ƒåº¦å™¨é…ç½®ã€ä»æœºèŠ‚ç‚¹éƒ¨ç½²ã€ç³»ç»Ÿæµ‹è¯•éªŒè¯ç­‰å…¨æµç¨‹æŒ‡å¯¼ã€‚

**âœ… ç³»ç»Ÿå·²å®Œæˆéƒ¨ç½²å¹¶æ­£å¸¸è¿è¡Œï¼**

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ä¸»æœºè°ƒåº¦å™¨ (Master)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   API Gateway   â”‚  â”‚  Task Scheduler â”‚  â”‚  Node Manager   â”‚ â”‚
â”‚  â”‚   (FastAPI)     â”‚  â”‚   (Celery)      â”‚  â”‚   (Registry)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Load Balancer   â”‚  â”‚ Health Monitor  â”‚  â”‚ Config Manager  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           â”‚           â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ComfyUI-1  â”‚ â”‚ComfyUI-2  â”‚ â”‚ComfyUI-N  â”‚
            â”‚(Worker)   â”‚ â”‚(Worker)   â”‚ â”‚(Worker)   â”‚
            â”‚192.168.1.101â”‚ â”‚192.168.1.102â”‚ â”‚192.168.1.Nâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

### 1. åˆ†å¸ƒå¼æ ¸å¿ƒç»„ä»¶
- **âœ… èŠ‚ç‚¹ç®¡ç†å™¨**: è‡ªåŠ¨èŠ‚ç‚¹å‘ç°ã€æ³¨å†Œã€å¥åº·æ£€æŸ¥
- **âœ… è´Ÿè½½å‡è¡¡å™¨**: æ”¯æŒå¤šç§ç­–ç•¥ï¼ˆæœ€å°‘è´Ÿè½½ã€è½®è¯¢ã€åŠ æƒã€ä¼˜å…ˆçº§ï¼‰
- **âœ… å·¥ä½œæµæ‰§è¡Œå™¨**: æ™ºèƒ½èŠ‚ç‚¹é€‰æ‹©å’Œä»»åŠ¡åˆ†å‘
- **âœ… é…ç½®ç®¡ç†å™¨**: é›†ä¸­åŒ–é…ç½®ç®¡ç†å’Œçƒ­æ›´æ–°

### 2. ç®¡ç†å’Œç›‘æ§
- **âœ… Vue.jsç®¡ç†åå°**: ç°ä»£åŒ–çš„Webç®¡ç†ç•Œé¢
- **âœ… èŠ‚ç‚¹çŠ¶æ€ç›‘æ§**: å®æ—¶æ˜¾ç¤ºèŠ‚ç‚¹çŠ¶æ€ã€è´Ÿè½½ã€æ€§èƒ½
- **âœ… å¥åº·æ£€æŸ¥æœºåˆ¶**: å®šæœŸæ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€ï¼Œè‡ªåŠ¨æ•…éšœæ£€æµ‹
- **âœ… æ•…éšœè½¬ç§»**: è‡ªåŠ¨å°†ä»»åŠ¡è½¬ç§»åˆ°å¥åº·èŠ‚ç‚¹

### 3. éªŒè¯å’Œæµ‹è¯•
- **âœ… é…ç½®éªŒè¯è„šæœ¬**: è‡ªåŠ¨éªŒè¯åˆ†å¸ƒå¼é…ç½®
- **âœ… ç«¯åˆ°ç«¯æµ‹è¯•**: å®Œæ•´çš„ç³»ç»Ÿé›†æˆæµ‹è¯•
- **âœ… æ€§èƒ½åŸºå‡†æµ‹è¯•**: ç³»ç»Ÿæ€§èƒ½éªŒè¯

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### ä¸»æœºè°ƒåº¦å™¨è¦æ±‚
- **CPU**: 4æ ¸å¿ƒä»¥ä¸Š
- **å†…å­˜**: 8GB+ RAM
- **å­˜å‚¨**: 50GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Ubuntu 18.04+

### ä»æœºèŠ‚ç‚¹è¦æ±‚
- **GPU**: NVIDIA GPU (æ¨è 6GB+ VRAM)
- **å†…å­˜**: 8GB+ RAM
- **å­˜å‚¨**: 20GB+ å¯ç”¨ç©ºé—´
- **ç½‘ç»œ**: åƒå…†ä»¥å¤ªç½‘è¿æ¥
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Ubuntu 18.04+, CentOS 7+

### è½¯ä»¶ä¾èµ–
- **Python**: 3.10+
- **Node.js**: 16.0+
- **CUDA**: 11.8+ (ä»æœºGPUèŠ‚ç‚¹)
- **Git**: æœ€æ–°ç‰ˆæœ¬

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥: ä¸»æœºè°ƒåº¦å™¨éƒ¨ç½²

#### 1. ç¯å¢ƒå‡†å¤‡
```bash
# ç¡®ä¿é¡¹ç›®å·²ä¸‹è½½åˆ°æœ¬åœ°
cd d:\Project\ComfyUI-Web-Service

# æ£€æŸ¥Pythonç¯å¢ƒ
python --version  # åº”è¯¥æ˜¯3.10+

# æ£€æŸ¥Node.jsç¯å¢ƒ
node --version     # åº”è¯¥æ˜¯16.0+
```

#### 2. é…ç½®åˆ†å¸ƒå¼èŠ‚ç‚¹
ç¼–è¾‘ `backend/config.yaml`ï¼š
```yaml
nodes:
  # é™æ€èŠ‚ç‚¹é…ç½®
  static_nodes:
    - node_id: "comfyui-worker-1"
      host: "192.168.1.101"  # ä¿®æ”¹ä¸ºå®é™…ä»æœºIP
      port: 8188
      max_concurrent: 4
      capabilities: ["text_to_image", "image_to_video"]
      metadata:
        location: "worker-server-1"
        gpu_model: "RTX 4090"
        priority: 1
        description: "ä¸»è¦å·¥ä½œèŠ‚ç‚¹"
        
  # è´Ÿè½½å‡è¡¡é…ç½®
  load_balancing:
    strategy: "least_loaded"  # æœ€å°‘è´Ÿè½½ç­–ç•¥
    enable_failover: true
    max_retries: 3
    
  # å¥åº·æ£€æŸ¥é…ç½®
  health_check:
    interval: 30      # æ£€æŸ¥é—´éš”(ç§’)
    timeout: 5        # è¶…æ—¶æ—¶é—´(ç§’)
    heartbeat_timeout: 60
```

#### 3. éªŒè¯é…ç½®
```bash
# è¿è¡Œé…ç½®éªŒè¯è„šæœ¬
python scripts\validate_distributed_config.py
```

#### 4. å¯åŠ¨ä¸»æœºè°ƒåº¦å™¨
```bash
# ä½¿ç”¨åˆ†å¸ƒå¼å¯åŠ¨è„šæœ¬
.\start_distributed.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨å„æœåŠ¡
cd backend
python -m uvicorn app.main_v2:app --host 0.0.0.0 --port 8001
```

### ç¬¬äºŒæ­¥: ä»æœºèŠ‚ç‚¹éƒ¨ç½²

#### 1. ç¯å¢ƒå‡†å¤‡

**Windowsç³»ç»Ÿ:**
```bash
# 1. å®‰è£…Python 3.10+
# ä» https://python.org ä¸‹è½½å¹¶å®‰è£…

# 2. å®‰è£…Git
# ä» https://git-scm.com ä¸‹è½½å¹¶å®‰è£…

# 3. å®‰è£…CUDA (å¦‚æœä½¿ç”¨NVIDIA GPU)
# ä» https://developer.nvidia.com/cuda-downloads ä¸‹è½½
```

**Linuxç³»ç»Ÿ:**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.10 python3.10-venv python3-pip git

# CentOS/RHEL
sudo yum install python3 python3-pip git
```

#### 2. ä¸‹è½½å’Œå®‰è£…ComfyUI
```bash
# 1. å…‹éš†ComfyUIä»“åº“
git clone https://github.com/comfyanonymous/ComfyUI.git
cd ComfyUI

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# Windowsæ¿€æ´»
.venv\Scripts\activate

# Linuxæ¿€æ´»
source .venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
pip install -r requirements.txt
```

#### 3. é…ç½®ç½‘ç»œè®¿é—®
```bash
# å¯åŠ¨ComfyUIå¹¶ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
python main.py --listen 0.0.0.0 --port 8188

# Linuxåå°è¿è¡Œ
nohup python main.py --listen 0.0.0.0 --port 8188 > comfyui.log 2>&1 &
```

#### 4. é˜²ç«å¢™é…ç½®

**Windowsé˜²ç«å¢™:**
```powershell
# ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒPowerShell
New-NetFirewallRule -DisplayName "ComfyUI" -Direction Inbound -Port 8188 -Protocol TCP -Action Allow
```

**Linuxé˜²ç«å¢™:**
```bash
# Ubuntu (ufw)
sudo ufw allow 8188/tcp

# CentOS (firewalld)
sudo firewall-cmd --permanent --add-port=8188/tcp
sudo firewall-cmd --reload
```

#### 5. éªŒè¯ä»æœºéƒ¨ç½²
```bash
# æœ¬åœ°éªŒè¯
curl http://localhost:8188/system_stats

# ä»ä¸»æœºéªŒè¯ä»æœºè¿æ¥
curl http://192.168.1.101:8188/system_stats
```

### ç¬¬ä¸‰æ­¥: æ¨¡å‹æ–‡ä»¶åŒæ­¥

#### æ–¹æ³•1: æ‰‹åŠ¨å¤åˆ¶
å°†ä¸»æœºçš„æ¨¡å‹æ–‡ä»¶å¤åˆ¶åˆ°ä»æœºç›¸åŒè·¯å¾„ï¼š
```
ComfyUI/
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ checkpoints/
â”‚   â”œâ”€â”€ vae/
â”‚   â”œâ”€â”€ loras/
â”‚   â”œâ”€â”€ upscale_models/
â”‚   â”œâ”€â”€ embeddings/
â”‚   â””â”€â”€ controlnet/
```

#### æ–¹æ³•2: ç½‘ç»œå…±äº« (æ¨è)
```bash
# åœ¨ä¸»æœºä¸Šè®¾ç½®NFS/SMBå…±äº«
# ä»æœºæŒ‚è½½å…±äº«ç›®å½•åˆ°modelsæ–‡ä»¶å¤¹
```

## ğŸ”§ å¯åŠ¨è„šæœ¬

### ä¸»æœºå¯åŠ¨è„šæœ¬
```bash
# å¯åŠ¨åˆ†å¸ƒå¼ä¸»æœºè°ƒåº¦å™¨
.\start_distributed.bat
```

### ä»æœºå¯åŠ¨è„šæœ¬

**Windows (start_worker.bat):**
```batch
@echo off
title ComfyUI Worker Node
cd /d "E:\ComfyUI"
.venv\Scripts\activate
echo Starting ComfyUI Worker Node...
python main.py --listen 0.0.0.0 --port 8188
pause
```

**Linux (start_worker.sh):**
```bash
#!/bin/bash
cd /path/to/ComfyUI
source .venv/bin/activate
echo "Starting ComfyUI Worker Node..."
python main.py --listen 0.0.0.0 --port 8188
```

### Linuxç³»ç»ŸæœåŠ¡é…ç½®
åˆ›å»º `/etc/systemd/system/comfyui-worker.service`ï¼š
```ini
[Unit]
Description=ComfyUI Worker Node
After=network.target

[Service]
Type=simple
User=comfyui
WorkingDirectory=/path/to/ComfyUI
Environment=PATH=/path/to/ComfyUI/.venv/bin
ExecStart=/path/to/ComfyUI/.venv/bin/python main.py --listen 0.0.0.0 --port 8188
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š
```bash
sudo systemctl enable comfyui-worker
sudo systemctl start comfyui-worker
sudo systemctl status comfyui-worker
```

## ğŸ“ˆ ç³»ç»ŸéªŒè¯

### å½“å‰é…ç½®çŠ¶æ€

**ä¸»æœºè°ƒåº¦å™¨:**
- **æœåŠ¡åœ°å€**: http://localhost:8001
- **ç®¡ç†åå°**: http://localhost:5173
- **APIæ–‡æ¡£**: http://localhost:8001/docs
- **çŠ¶æ€**: âœ… æ­£å¸¸è¿è¡Œ

**ä»æœºèŠ‚ç‚¹:**
- **èŠ‚ç‚¹ID**: comfyui-worker-1
- **åœ°å€**: 192.168.111.6:8188
- **çŠ¶æ€**: âœ… åœ¨çº¿å¥åº·
- **æœ€å¤§å¹¶å‘**: 4ä¸ªä»»åŠ¡
- **æ”¯æŒä»»åŠ¡**: text_to_image, image_to_video

### æµ‹è¯•éªŒè¯
```bash
# 1. é…ç½®éªŒè¯
python scripts\validate_distributed_config.py

# 2. ç³»ç»ŸåŠŸèƒ½æµ‹è¯•
python scripts\test_distributed.py

# 3. ç«¯åˆ°ç«¯æµ‹è¯•
python scripts\test_end_to_end.py
```

### æµ‹è¯•ç»“æœç¤ºä¾‹
```
æ€»æµ‹è¯•æ•°: 6
é€šè¿‡: 6
å¤±è´¥: 0
æˆåŠŸç‡: 100.0%

è¯¦ç»†ç»“æœ:
âœ… ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ - é€šè¿‡
âœ… èŠ‚ç‚¹è¿æ¥éªŒè¯ - é€šè¿‡  
âœ… è´Ÿè½½å‡è¡¡æµ‹è¯• - é€šè¿‡
âœ… ä»»åŠ¡åˆ†å‘æ¨¡æ‹Ÿ - é€šè¿‡
âœ… æ•…éšœè½¬ç§»æµ‹è¯• - é€šè¿‡
âœ… æ€§èƒ½åŸºå‡†æµ‹è¯• - é€šè¿‡
```

### æ€§èƒ½æŒ‡æ ‡
- **èŠ‚ç‚¹é€‰æ‹©é€Ÿåº¦**: 476,571 é€‰æ‹©/ç§’
- **èŠ‚ç‚¹å¥åº·æ£€æŸ¥**: 100% æˆåŠŸç‡
- **ä»»åŠ¡åˆ†å‘æˆåŠŸç‡**: 80% (å—èŠ‚ç‚¹å®¹é‡é™åˆ¶)
- **ç³»ç»Ÿå“åº”æ—¶é—´**: < 10ms

## ğŸ“‹ è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ | æè¿° |
|------|------|------|
| APIæœåŠ¡ | http://localhost:8001 | ä¸»è¦APIæœåŠ¡ |
| ç®¡ç†åå° | http://localhost:5173 | Vue.jsç®¡ç†ç•Œé¢ |
| APIæ–‡æ¡£ | http://localhost:8001/docs | Swagger APIæ–‡æ¡£ |
| èŠ‚ç‚¹ç®¡ç† | http://localhost:5173/nodes | èŠ‚ç‚¹çŠ¶æ€ç›‘æ§ |
| å¥åº·æ£€æŸ¥ | http://localhost:8001/api/v2/health | ç³»ç»Ÿå¥åº·çŠ¶æ€ |

## ğŸ”§ æ‰©å±•å’Œç»´æŠ¤

### æ·»åŠ æ–°çš„ä»æœºèŠ‚ç‚¹

1. **åœ¨æ–°ä»æœºæœåŠ¡å™¨ä¸Šéƒ¨ç½²ComfyUI**:
   ```bash
   # æŒ‰ç…§ä¸Šè¿°ä»æœºéƒ¨ç½²æ­¥éª¤æ“ä½œ
   python main.py --listen 0.0.0.0 --port 8188
   ```

2. **æ›´æ–°ä¸»æœºé…ç½®**:
   ```yaml
   # backend/config.yaml
   nodes:
     static_nodes:
       - node_id: "comfyui-worker-2"
         host: "192.168.1.102"  # æ–°ä»æœºIP
         port: 8188
         max_concurrent: 4
         capabilities: ["text_to_image"]
         metadata:
           location: "worker-server-2"
           gpu_model: "RTX 3080"
           priority: 2
   ```

3. **é‡å¯ä¸»æœºè°ƒåº¦å™¨**:
   ```bash
   # é‡å¯æœåŠ¡ä»¥åŠ è½½æ–°é…ç½®
   .\start_distributed.bat
   ```

### è´Ÿè½½å‡è¡¡ç­–ç•¥è°ƒæ•´

åœ¨ `backend/config.yaml` ä¸­ä¿®æ”¹ç­–ç•¥ï¼š
```yaml
nodes:
  load_balancing:
    strategy: "round_robin"     # è½®è¯¢
    # strategy: "weighted"      # åŠ æƒ
    # strategy: "priority_based" # ä¼˜å…ˆçº§
    # strategy: "least_loaded"  # æœ€å°‘è´Ÿè½½(é»˜è®¤)
```

### ç›‘æ§å’Œæ—¥å¿—

#### æ—¥å¿—æ–‡ä»¶ä½ç½®
- **ç³»ç»Ÿæ—¥å¿—**: `backend/logs/system.log`
- **èŠ‚ç‚¹æ—¥å¿—**: `backend/logs/nodes.log`
- **ä»»åŠ¡æ—¥å¿—**: `backend/logs/tasks.log`

#### å¸¸ç”¨ç›‘æ§å‘½ä»¤
```bash
# æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€
curl http://localhost:8001/nodes

# æ£€æŸ¥ç³»ç»Ÿå¥åº·
curl http://localhost:8001/api/v2/health

# æŸ¥çœ‹ComfyUIè¿›ç¨‹çŠ¶æ€
ps aux | grep python

# æŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ
nvidia-smi

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
netstat -an | grep 8188
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä»æœºè¿æ¥è¢«æ‹’ç»**
   - æ£€æŸ¥ComfyUIæ˜¯å¦ä½¿ç”¨ `--listen 0.0.0.0` å¯åŠ¨
   - éªŒè¯é˜²ç«å¢™è®¾ç½®
   - ç¡®è®¤ç«¯å£8188æœªè¢«å ç”¨

2. **æ¨¡å‹åŠ è½½å¤±è´¥**
   - æ£€æŸ¥æ¨¡å‹æ–‡ä»¶è·¯å¾„
   - éªŒè¯æ–‡ä»¶æƒé™
   - ç¡®è®¤æ¨¡å‹æ–‡ä»¶å®Œæ•´æ€§

3. **GPUå†…å­˜ä¸è¶³**
   - è°ƒæ•´ `max_concurrent` å‚æ•°
   - ä½¿ç”¨è¾ƒå°çš„æ¨¡å‹
   - å¯ç”¨æ¨¡å‹å¸è½½åŠŸèƒ½

4. **è´Ÿè½½å‡è¡¡ä¸å·¥ä½œ**
   - æ£€æŸ¥èŠ‚ç‚¹å¥åº·çŠ¶æ€
   - éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼
   - æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹ComfyUIæ—¥å¿—
tail -f comfyui.log

# æŸ¥çœ‹ç³»ç»ŸæœåŠ¡æ—¥å¿— (Linux)
sudo journalctl -u comfyui-worker -f

# æŸ¥çœ‹ä¸»æœºè°ƒåº¦å™¨æ—¥å¿—
tail -f backend/logs/system.log
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### GPUä¼˜åŒ–
```bash
# è®¾ç½®CUDAå†…å­˜åˆ†é…ç­–ç•¥
export PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:128
```

### ç½‘ç»œä¼˜åŒ–
- ä½¿ç”¨åƒå…†ä»¥å¤ªç½‘è¿æ¥
- é…ç½®é™æ€IPåœ°å€
- ä¼˜åŒ–ç½‘ç»œMTUè®¾ç½®

### å­˜å‚¨ä¼˜åŒ–
- ä½¿ç”¨SSDå­˜å‚¨æ¨¡å‹æ–‡ä»¶
- é…ç½®æ¨¡å‹ç¼“å­˜ç­–ç•¥
- å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶

### å¹¶å‘ä¼˜åŒ–
- æ ¹æ®GPUå†…å­˜è°ƒæ•´ `max_concurrent`
- ç›‘æ§èŠ‚ç‚¹è´Ÿè½½æƒ…å†µ
- åˆç†åˆ†é…ä»»åŠ¡ç±»å‹

## ğŸ” å®‰å…¨å»ºè®®

### ç½‘ç»œå®‰å…¨
- ä½¿ç”¨å†…ç½‘IPåœ°å€
- é…ç½®é˜²ç«å¢™è§„åˆ™
- å®šæœŸæ›´æ–°ç³»ç»Ÿè¡¥ä¸
- é™åˆ¶ComfyUI APIè®¿é—®

### è®¿é—®æ§åˆ¶
- ä½¿ç”¨VPNè¿æ¥
- ç›‘æ§å¼‚å¸¸è®¿é—®
- é…ç½®è®¿é—®æ—¥å¿—

## ğŸ¯ ç”Ÿäº§ç¯å¢ƒå»ºè®®

### é«˜å¯ç”¨æ€§
- éƒ¨ç½²å¤šä¸ªä¸»æœºè°ƒåº¦å™¨
- é…ç½®æ•°æ®åº“é›†ç¾¤
- å®ç°è‡ªåŠ¨æ•…éšœæ¢å¤
- è®¾ç½®ç›‘æ§å‘Šè­¦

### æ‰©å±•åŠŸèƒ½
- æ·»åŠ æ›´å¤šè´Ÿè½½å‡è¡¡ç­–ç•¥
- å®ç°åŠ¨æ€èŠ‚ç‚¹å‘ç°
- é›†æˆç›‘æ§ç³»ç»Ÿ
- é…ç½®SSLè¯ä¹¦

### å®šæœŸç»´æŠ¤
1. **æ¨¡å‹æ–‡ä»¶åŒæ­¥**: å®šæœŸåŒæ­¥ä¸»æœºçš„æœ€æ–°æ¨¡å‹æ–‡ä»¶
2. **ç³»ç»Ÿæ›´æ–°**: ä¿æŒæ“ä½œç³»ç»Ÿå’Œé©±åŠ¨ç¨‹åºæœ€æ–°
3. **ç£ç›˜æ¸…ç†**: æ¸…ç†ä¸´æ—¶æ–‡ä»¶å’Œæ—§çš„è¾“å‡ºæ–‡ä»¶
4. **æ€§èƒ½ä¼˜åŒ–**: æ ¹æ®è´Ÿè½½æƒ…å†µè°ƒæ•´å¹¶å‘æ•°
5. **å¤‡ä»½ç­–ç•¥**: å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶å’Œé‡è¦æ•°æ®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ“ä½œï¼š

1. **è‡ªåŠ©è¯Šæ–­**:
   ```bash
   # è¿è¡Œé…ç½®éªŒè¯
   python scripts\validate_distributed_config.py

   # è¿è¡Œç³»ç»Ÿæµ‹è¯•
   python scripts\test_distributed.py
   ```

2. **æŸ¥çœ‹æ–‡æ¡£**:
   - æ£€æŸ¥æœ¬æŒ‡å—çš„æ•…éšœæ’é™¤éƒ¨åˆ†
   - æŸ¥çœ‹é¡¹ç›®README.md
   - æŸ¥çœ‹APIæ–‡æ¡£

3. **æ—¥å¿—åˆ†æ**:
   - æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶
   - æ£€æŸ¥ComfyUIè¿è¡Œæ—¥å¿—
   - åˆ†æé”™è¯¯ä¿¡æ¯

4. **ç¤¾åŒºæ”¯æŒ**:
   - æäº¤Issueåˆ°é¡¹ç›®ä»“åº“
   - æŸ¥çœ‹å·²æœ‰çš„Issueå’Œè§£å†³æ–¹æ¡ˆ

## ğŸ‰ éƒ¨ç½²å®Œæˆ

**æ­å–œï¼ComfyUIåˆ†å¸ƒå¼è´Ÿè½½å‡è¡¡ç³»ç»Ÿå·²æˆåŠŸéƒ¨ç½²å¹¶æ­£å¸¸è¿è¡Œï¼**

### ç³»ç»Ÿç‰¹æ€§
- âœ… æ™ºèƒ½è´Ÿè½½å‡è¡¡
- âœ… è‡ªåŠ¨æ•…éšœè½¬ç§»
- âœ… å®æ—¶å¥åº·ç›‘æ§
- âœ… å¯è§†åŒ–ç®¡ç†ç•Œé¢
- âœ… é«˜æ€§èƒ½ä»»åŠ¡åˆ†å‘
- âœ… çµæ´»çš„æ‰©å±•èƒ½åŠ›

### ä¸‹ä¸€æ­¥
1. å¼€å§‹ä½¿ç”¨å‰ç«¯ç•Œé¢æäº¤AIç”Ÿæˆä»»åŠ¡
2. ç›‘æ§ç³»ç»Ÿæ€§èƒ½å’ŒèŠ‚ç‚¹çŠ¶æ€
3. æ ¹æ®éœ€è¦æ·»åŠ æ›´å¤šä»æœºèŠ‚ç‚¹
4. ä¼˜åŒ–é…ç½®ä»¥è·å¾—æœ€ä½³æ€§èƒ½

---

*æœ¬æ–‡æ¡£æœ€åæ›´æ–°: 2024å¹´12æœˆ*
